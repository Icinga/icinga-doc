<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE chapter [
  <!ENTITY % all.entities SYSTEM "all-entities.ent">
  %all.entities;
]>
<section version="5.0" xml:id="activechecks" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:html="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
    <title><anchor xml:id="quickstart-ubuntu" />Schnellstart &name-ubuntu;</title>
    <title><anchor xml:id="quickstart-ubuntu.xml" />Schnellstart &name-ubuntu;</title>
    <para>
      <emphasis role="bold">Einführung</emphasis>
    </para>
    <para>Diese Schnellstartanleitung ist dazu gedacht, Ihnen einfache Anweisungen zu liefern, wie Sie &name-icinga; innerhalb von 20 Minuten aus dem Quellcode auf &name-ubuntu; installieren und Ihren lokalen Rechner damit �berwachen. Hier werden keine fortgeschrittenen Installationsoptionen vorgestellt - lediglich die Grundlagen, die f�r 95% aller Benutzer funktionieren, die anfangen wollen.</para>
    <para>Diese Anweisungen basieren auf einer <emphasis role="bold">&name-ubuntu; 6.10</emphasis> (Desktop)-Installation. Sie sollten auch für eine <emphasis role="bold">&name-ubuntu; 7.10</emphasis>-Installation funktionieren.</para>
    <para>
      <emphasis role="bold">Was dabei herauskommt</emphasis>
    </para>
    <para>Wenn Sie diesen Anweisungen folgen, werden Sie am Ende folgendes haben:</para>
    <itemizedlist>
      <listitem>
        <para> &name-icinga; und die Plugins werden unterhalb von &url-icinga-base; installiert sein</para>
      </listitem>
      <listitem>
        <para> &name-icinga; wird so konfiguriert sein, dass es einige Dinge auf Ihrem lokalen System überwacht (CPU-Auslastung, Plattenbelegung, usw.)</para>
      </listitem>
      <listitem>
        <para> Das &name-icinga;-Web-Interface ist erreichbar unter http://localhost/nagios/</para>
      </listitem>
    </itemizedlist>
    <para>
      <emphasis role="bold">Benötigte Pakete</emphasis>
    </para>
    <para>Stellen Sie sicher, dass die folgenden Pakete installiert sind, bevor Sie fortfahren.</para>
    <itemizedlist>
      <listitem>
        <para> &name-apache; 2</para>
      </listitem>
      <listitem>
        <para> GCC-Compiler und Development-Libraries</para>
      </listitem>
      <listitem>
        <para> &name-gd;-Development-Libraries</para>
      </listitem>
    </itemizedlist>
    <para>Sie können <emphasis>apt-get</emphasis> benutzen, um diese Pakete mit Hilfe der folgenden Befehle zu installieren:</para>
    <screen>
sudo apt-get install apache2
sudo apt-get install build-essential
</screen>
    <para>Unter &name-ubuntu; 6.10 installieren Sie die gd2-Library mit diesem Befehl:</para>
    <screen>
sudo apt-get install libgd2-dev
</screen>
    <para>Unter &name-ubuntu; 7.10 hat sich der Name des gd2-Library-Pakets geändert, so dass Sie folgenden Befehl benutzen müssen:</para>
    <screen>
sudo apt-get install libgd2-xpm-dev
</screen>
    <para>
      <emphasis role="bold">1) Benutzerinformationen erstellen</emphasis>
    </para>
    <para>Werden Sie zum root-Benutzer.</para>
    <screen>
sudo -s
</screen>
    <para>Erstellen Sie ein neues Benutzerkonto <emphasis>nagios</emphasis> und vergeben Sie ein Passwort.</para>
    <screen>
/usr/sbin/useradd -m nagios
passwd nagios
</screen>
    <para>Auf der &name-ubuntu;-Server-Edition (6.01 und ggf. neueren Versionen) müssen Sie außerdem eine <emphasis>nagios</emphasis>-Gruppe anlegen (sie wird nicht automatisch erstellt). Wahrscheinlich können Sie diesen Schritt auf den &name-ubuntu;-Desktop-Editionen überspringen.</para>
    <screen>
/usr/sbin/groupadd nagios
/usr/sbin/usermod -G nagios nagios
</screen>
    <para>Legen Sie eine neue Gruppe <emphasis>nagcmd</emphasis> an, damit über das Web-Interface externe Befehle erteilt werden können. Fügen Sie den &name-icinga;- und den Web-Server-Benutzer zu dieser Gruppe hinzu.</para>
    <screen>
/usr/sbin/groupadd nagcmd
/usr/sbin/usermod -a -G nagcmd nagios
/usr/sbin/usermod -a -G nagcmd www-data
</screen>
    <para>
      <emphasis role="bold">2) &name-icinga; und Plugins herunterladen</emphasis>
    </para>
    <para>Legen Sie ein Verzeichnis an, um die Dateien zu speichern.</para>
    <screen>
mkdir ~/downloads
cd ~/downloads
</screen>
    <para>Laden Sie die Quellcode-Archive von &name-icinga; und den &name-icinga;-Plugins herunter (besuchen Sie <link xlink:href="&url-nagios;/download/">&url-nagios;/download/</link>, um Verweise auf die aktuellsten Versionen zu sehen). Diese Anweisungen wurden mit &name-icinga; 3.0.6 und &name-icinga;-Plugins 1.4.11 getestet.</para>
    <screen>
wget http://osdn.dl.sourceforge.net/sourceforge/nagios/nagios-3.0.6.tar.gz
wget http://osdn.dl.sourceforge.net/sourceforge/nagiosplug/nagios-plugins-1.4.11.tar.gz
</screen>
    <para>
      <emphasis role="bold">3) &name-icinga; kompilieren und installieren</emphasis>
    </para>
    <para>Entpacken Sie die &name-icinga;-Quellcode-Archivdatei.</para>
    <screen>
cd ~/downloads
tar xzf nagios-3.0.6.tar.gz
cd nagios-3.0.6
</screen>
    <para>Führen Sie das &name-icinga;-configure-Script aus und übergeben Sie den Namen der Gruppe, die Sie vorhin angelegt haben:</para>
    <screen>
./configure --with-command-group=nagcmd
</screen>
    <para>Kompilieren Sie den &name-icinga;-Quellcode.</para>
    <screen>
make all
</screen>
    <para>Installieren Sie die Programme, Init-Scripte, Beispiel-Konfigurationsdaten und setzen Sie die Berechtigungen auf das Verzeichnis für die externen Befehle.</para>
    <screen>
make install
make install-init
make install-config
make install-commandmode
</screen>
    <para>Starten Sie &name-icinga; noch nicht - es gibt noch ein paar Dinge zu tun...</para>
    <para>
      <emphasis role="bold">4) Anpassen der Konfiguration</emphasis>
    </para>
    <para>Die Beispiel-<link linkend="config">Konfigurationsdateien</link> wurden nun im <emphasis>&url-icinga-base;/etc</emphasis>-Verzeichnis installiert. Diese Beispieldateien sollten funktionieren, um mit &name-icinga; zu starten. Nun fehlt nur noch eine Änderung, bevor Sie fortfahren können...</para>
    <para>Ändern Sie die <emphasis>&url-icinga-base;/etc/objects/contacts.cfg</emphasis>-Konfigurationsdatei mit Ihrem bevorzugten Editor und passen die e-Mail-Adresse in der <emphasis>nagiosadmin</emphasis>-Kontaktdefinition an, so dass sie die Adresse enthält, die im Falle von Alarmen benachrichtigt werden soll.</para>
    <screen>
vi &url-icinga-base;/etc/objects/contacts.cfg
</screen>
    <para>
      <emphasis role="bold">5) Konfigurieren des Web-Interface</emphasis>
    </para>
    <para>Installieren Sie die &name-icinga;-Web-Konfigurationsdateien im &name-apache; conf.d-Verzeichnis.</para>
    <screen>
make install-webconf
</screen>
    <para>Legen Sie ein <emphasis>nagiosadmin</emphasis>-Konto an, um sich am Web-Interface anmelden zu können. Merken Sie sich das Passwort, das Sie diesem Konto geben - Sie brauchen es später.</para>
    <screen>
htpasswd -c &url-icinga-base;/etc/htpasswd.users nagiosadmin
</screen>
    <para>Starten Sie &name-apache; neu, damit die Änderungen wirksam werden.</para>
    <screen>
/etc/init.d/apache2 reload
</screen>
    <para><inlinemediaobject>
        <imageobject>
          <imagedata fileref="../images/note.gif" format="GIF"/>
        </imageobject>
      </inlinemediaobject>
 Anmerkung: Prüfen Sie die Implementierung der verbesserten CGI-Sicherheitsmaßnahmen wie <link linkend="cgisecurity">hier</link> beschrieben, um sicherzustellen, dass Ihre Web-Authentifizierungsinformationen nicht kompromittiert werden.</para>
    <para>
      <emphasis role="bold">6) Kompilieren und installieren der &name-icinga;-Plugins</emphasis>
    </para>
    <para>Entpacken Sie die &name-icinga;-Plugins-Quellcode-Archivdatei.</para>
    <screen>
cd ~/downloads
tar xzf nagios-plugins-1.4.11.tar.gz
cd nagios-plugins-1.4.11
</screen>
    <para>Kompilieren und installieren Sie die Plugins.</para>
    <screen>
./configure --with-nagios-user=nagios --with-nagios-group=nagios
make
make install
</screen>
    <para>
      <emphasis role="bold">7) &name-icinga; starten</emphasis>
    </para>
    <para>Fügen Sie &name-icinga; zu der Liste der System-Services hinzu und sorgen Sie für einen automatischen Start, wenn das System hochfährt.</para>
    <screen>
ln -s /etc/init.d/nagios /etc/rcS.d/S99nagios
</screen>
    <para>Überprüfen Sie die &name-icinga;-Beispielkonfigurationsdateien.</para>
    <screen>
&url-icinga-base;/bin/nagios -v &url-icinga-base;/etc/nagios.cfg
</screen>
    <para>Wenn keine Fehler auftreten, starten Sie &name-icinga;.</para>
    <screen>
/etc/init.d/nagios start
</screen>
    <para>
      <emphasis role="bold">8) Anmelden am Web-Interface</emphasis>
    </para>
    <para>Sie sollten nun auf das &name-icinga;-Web-Interface zugreifen können. Sie werden nach dem Benutzernamen (<emphasis>nagiosadmin</emphasis>) und Passwort gefragt, das Sie vorhin angegeben haben.</para>
    <screen>
http://localhost/nagios/
</screen>
    <para>Klicken Sie auf den &quot;Service Detail&quot;-Verweis in der Navigationsleiste, um Details darüber zu erhalten, was auf Ihrer lokalen Maschine überwacht wird. Es wird ein paar Minuten dauern, bis &name-icinga; alle mit Ihrer Maschine verbundenen Services geprüft hat, weil die Prüfungen über eine gewisse Zeit verteilt werden.</para>
    <para>
      <emphasis role="bold">9) Andere Anpassungen</emphasis>
    </para>
    <para>Wenn Sie e-Mail-Benachrichtigungen über &name-icinga;-Alarme bekommen wollen, installieren Sie das mailx-(Postfix)-Paket.</para>
    <screen>
sudo apt-get install mailx
sudo apt-get install postfix
</screen>
    <para>Sie müssen die &name-icinga;-e-Mail-Benachrichtigungsbefehle in <emphasis>&url-icinga-base;/etc/objects/commands.cfg</emphasis> anpassen und alle &apos;/bin/mail&apos;-Verweise in &apos;/usr/bin/mail&apos; ändern. Anschließend müssen Sie &name-icinga; neustarten, damit die Änderungen aktiv werden.</para>
    <screen>
sudo /etc/init.d/nagios restart
</screen>
    <para>Die Konfiguration von e-Mail-Benachrichtigungen ist nicht Gegenstand dieser Anleitung. &name-icinga; ist konfiguriert, um e-Mail-Benachrichtigungen zu versenden, aber möglicherweise ist auf Ihrem System noch kein Mail-Programm installiert bzw. konfiguriert. Schauen Sie in Ihre Systemdokumentation, suchen Sie im Web oder gucken Sie im <link xlink:href="&url-nagios-community;">&name-icinga;Community.org-Wiki</link> nach genauen Anweisungen, wie Ihr System konfiguriert werden muss, damit es e-Mail-Mitteilungen an externe Adressen versendet. Mehr Informationen zu Benachrichtigungen finden Sie <link linkend="notifications">hier</link>.</para>
    <para>
      <emphasis role="bold">10) Fertig</emphasis>
    </para>
    <para>Glückwunsch! Sie haben erfolgreich &name-icinga; installiert. Ihre Reise in die Überwachung hat gerade begonnen. Sie werden ohne Zweifel mehr als nur Ihre lokale Maschine überwachen wollen, so dass Sie u.a. die folgenden Abschnitte lesen sollten...</para>
    <itemizedlist>
      <listitem>
        <para>
          <link linkend="monitoring-windows">Windows-Rechner überwachen</link>
        </para>
      </listitem>
      <listitem>
        <para>
          <link linkend="monitoring-linux">&name-linux;/Unix-Rechner überwachen</link>
        </para>
      </listitem>
      <listitem>
        <para>
          <link linkend="monitoring-netware">Netware-Server überwachen</link>
        </para>
      </listitem>
      <listitem>
        <para>
          <link linkend="monitoring-routers">Router/Switches überwachen</link>
        </para>
      </listitem>
      <listitem>
        <para>
          <link linkend="monitoring-publicservices">Öffentlich zugängliche Dienste (HTTP, FTP, SSH, etc.) überwachen</link>
        </para>
      </listitem>
    </itemizedlist>
    <indexterm zone="quickstart-ubuntu"><primary>Schnellstart &name-ubuntu;</primary></indexterm>
    <indexterm zone="quickstart-ubuntu.xml"><primary>Schnellstart &name-ubuntu;</primary></indexterm>
</section>
