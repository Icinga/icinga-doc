<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE chapter [
  <!ENTITY % all.entities SYSTEM "all-entities.ent">
  %all.entities;
]>
<section version="5.0" xml:id="activechecks" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:html="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
    <title><anchor xml:id="quickstart-fedora" />Schnellstart &name-fedora;</title>
    <title><anchor xml:id="quickstart-fedora.xml" />Schnellstart &name-fedora;</title>
    <para>
      <emphasis role="bold">Einführung</emphasis>
    </para>
    <para>Diese Schnellstartanleitung ist dazu gedacht, Ihnen einfache Anweisungen zu liefern, wie Sie &name-icinga; innerhalb von 20 Minuten aus dem Quellcode auf &name-fedora; installieren und Ihren lokalen Rechner damit �berwachen. Hier werden keine fortgeschrittenen Installationsoptionen vorgestellt - lediglich die Grundlagen, die f�r 95% aller Benutzer funktionieren, die anfangen wollen.</para>
    <para>Diese Anweisungen basieren auf einer Standard-<emphasis role="bold">&name-fedora; Core 6</emphasis>-&name-linux;-Distribution.</para>
    <para>
      <emphasis role="bold">Was dabei herauskommt</emphasis>
    </para>
    <para>Wenn Sie diesen Anweisungen folgen, werden Sie am Ende folgendes haben:</para>
    <itemizedlist>
      <listitem>
        <para> &name-icinga; und die Plugins werden unterhalb von &url-icinga-base; installiert sein</para>
      </listitem>
      <listitem>
        <para> &name-icinga; wird so konfiguriert sein, dass es einige Dinge auf Ihrem lokalen System überwacht (CPU-Auslastung, Plattenbelegung, usw.)</para>
      </listitem>
      <listitem>
        <para> Das &name-icinga;-Web-Interface ist erreichbar unter http://localhost/nagios/</para>
      </listitem>
    </itemizedlist>
    <para>
      <emphasis role="bold">Voraussetzungen</emphasis>
    </para>
    <para>Während einiger Teile der Installation benötigen Sie <emphasis role="bold">root</emphasis>-Zugang zu Ihrer Maschine.</para>
    <para>Stellen Sie sicher, dass die folgenden Pakete installiert sind, bevor Sie fortfahren.</para>
    <itemizedlist>
      <listitem>
        <para> &name-apache;</para>
      </listitem>
      <listitem>
        <para> GCC-Compiler</para>
      </listitem>
      <listitem>
        <para><link xlink:href="&url-gd;">&name-gd;</link> -Development-Libraries</para>
      </listitem>
    </itemizedlist>
    <para>Sie können <emphasis>yum</emphasis> benutzen, um diese Pakete mit Hilfe der folgenden Befehle zu installieren (als root):</para>
    <screen>
yum install httpd
yum install gcc
yum install glibc glibc-common
yum install gd gd-devel
</screen>
    <para>
      <emphasis role="bold">1) Benutzerinformationen erstellen</emphasis>
    </para>
    <para>Werden Sie zum root-Benutzer.</para>
    <screen>
su -l
</screen>
    <para>Erstellen Sie ein neues Benutzerkonto <emphasis>nagios</emphasis> und vergeben Sie ein Passwort.</para>
    <screen>
/usr/sbin/useradd -m nagios
passwd nagios
</screen>
    <para>Legen Sie eine neue Gruppe <emphasis>nagcmd</emphasis> an, damit über das Web-Interface externe Befehle erteilt werden können. Fügen Sie den &name-icinga;- und den Web-Server-Benutzer zu dieser Gruppe hinzu.</para>
    <screen>
/usr/sbin/groupadd nagcmd
/usr/sbin/usermod -a -G nagcmd nagios
/usr/sbin/usermod -a -G nagcmd apache
</screen>
    <para>
      <emphasis role="bold">2) &name-icinga; und Plugins herunterladen</emphasis>
    </para>
    <para>Legen Sie ein Verzeichnis an, um die Dateien zu speichern.</para>
    <screen>
mkdir ~/downloads
cd ~/downloads
</screen>
    <para>Laden Sie die Quellcode-Archive von &name-icinga; und den &name-icinga;-Plugins herunter (besuchen Sie <link xlink:href="&url-nagios;/download/">&url-nagios;/download/</link>, um Verweise auf die aktuellsten Versionen zu sehen). Die Anweisungen wurden mit &name-icinga; 3.0.6 und &name-icinga;-Plugins 1.4.11 getestet.</para>
    <screen>
wget http://osdn.dl.sourceforge.net/sourceforge/nagios/nagios-3.0.6.tar.gz
wget http://osdn.dl.sourceforge.net/sourceforge/nagiosplug/nagios-plugins-1.4.11.tar.gz
</screen>
    <para>
      <emphasis role="bold">3) &name-icinga; kompilieren und installieren</emphasis>
    </para>
    <para>Entpacken Sie die &name-icinga;-Quellcode-Archivdatei.</para>
    <screen>
cd ~/downloads
tar xzf nagios-3.0.6.tar.gz
cd nagios-3.0.6
</screen>
    <para>Führen Sie das &name-icinga;-configure-Script aus und übergeben Sie den Namen der Gruppe, die Sie vorhin angelegt haben:</para>
    <screen>
./configure --with-command-group=nagcmd
</screen>
    <para>Kompilieren Sie den &name-icinga;-Quellcode.</para>
    <screen>
make all
</screen>
    <para>Installieren Sie die Programme, Init-Scripte, Beispiel-Konfigurationsdaten und setzen Sie die Berechtigungen auf das Verzeichnis für die externen Befehle.</para>
    <screen>
make install
make install-init
make install-config
make install-commandmode
</screen>
    <para>Starten Sie &name-icinga; noch nicht - es gibt noch ein paar Dinge zu tun...</para>
    <para>
      <emphasis role="bold">4) Anpassen der Konfiguration</emphasis>
    </para>
    <para>Die Beispiel-<link linkend="config">Konfigurationsdateien</link> wurden nun im <emphasis>&url-icinga-base;/etc</emphasis>-Verzeichnis installiert. Diese Beispieldateien sollten funktionieren, um mit &name-icinga; zu starten. Nun fehlt nur noch eine Änderung, bevor Sie fortfahren können...</para>
    <para>Ändern Sie die <emphasis>&url-icinga-base;/etc/objects/contacts.cfg</emphasis>-Konfigurationsdatei mit Ihrem bevorzugten Editor und passen die e-Mail-Adresse in der <emphasis>nagiosadmin</emphasis>-Kontaktdefinition an, so dass sie die Adresse enthält, die im Falle von Alarmen benachrichtigt werden soll.</para>
    <screen>
vi &url-icinga-base;/etc/objects/contacts.cfg
</screen>
    <para>
      <emphasis role="bold">5) Konfigurieren des Web-Interface</emphasis>
    </para>
    <para>Installieren Sie die &name-icinga;-Web-Konfigurationsdateien im &name-apache; conf.d-Verzeichnis.</para>
    <screen>
make install-webconf
</screen>
    <para>Legen Sie ein <emphasis>nagiosadmin</emphasis>-Konto an, um sich am Web-Interface anmelden zu können. Merken Sie sich das Passwort, das Sie diesem Konto geben - Sie brauchen es später.</para>
    <screen>
htpasswd -c &url-icinga-base;/etc/htpasswd.users nagiosadmin
</screen>
    <para>Starten Sie &name-apache; neu, damit die Änderungen wirksam werden.</para>
    <screen>
service httpd restart
</screen>
    <para><inlinemediaobject>
        <imageobject>
          <imagedata fileref="../images/note.gif" format="GIF"/>
        </imageobject>
      </inlinemediaobject>
 Anmerkung: Prüfen Sie die Implementierung der verbesserten CGI-Sicherheitsmaßnahmen wie <link linkend="cgisecurity">hier</link> beschrieben, um sicherzustellen, dass Ihre Web-Authentifizierungsinformationen nicht kompromittiert werden.</para>
    <para>
      <emphasis role="bold">6) Kompilieren und installieren der &name-icinga;-Plugins</emphasis>
    </para>
    <para>Entpacken Sie die &name-icinga;-Plugins-Quellcode-Archivdatei.</para>
    <screen>
cd ~/downloads
tar xzf nagios-plugins-1.4.11.tar.gz
cd nagios-plugins-1.4.11
</screen>
    <para>Kompilieren und installieren Sie die Plugins.</para>
    <screen>
./configure --with-nagios-user=nagios --with-nagios-group=nagios
make
make install
</screen>
    <para>
      <emphasis role="bold">7) &name-icinga; starten</emphasis>
    </para>
    <para>Fügen Sie &name-icinga; zu der Liste der System-Services hinzu und sorgen Sie für einen automatischen Start, wenn das System hochfährt.</para>
    <screen>
chkconfig --add nagios
chkconfig nagios on
</screen>
    <para>Überprüfen Sie die &name-icinga;-Beispielkonfigurationsdateien.</para>
    <screen>
&url-icinga-base;/bin/nagios -v &url-icinga-base;/etc/nagios.cfg
</screen>
    <para>Wenn keine Fehler auftreten, starten Sie &name-icinga;.</para>
    <screen>
service nagios start
</screen>
    <para>
      <emphasis role="bold">8) Anpassen der SE&name-linux;-Einstellungen</emphasis>
    </para>
    <para>&name-fedora; wird mit installiertem SE&name-linux; (Security Enhanced &name-linux;) ausgeliefert und läuft im &quot;Enforcing&quot;-Modus. Dies kann zu &quot;Internal Server Error&quot;-Fehlern führen, wenn Sie versuchen, die &name-icinga;-CGIs aufzurufen.</para>
    <para>Schauen Sie, ob SE&name-linux; im Enforcing-Modus läuft.</para>
    <screen>
getenforce
</screen>
    <para>Setzen Sie SE&name-linux; in den &quot;Permissive&quot;-Modus.</para>
    <screen>
setenforce 0
</screen>
    <para>Damit diese Änderung dauerhaft wird, müssen Sie diese Einstellung in <emphasis>/etc/selinux/config</emphasis> anpassen und das System neustarten.</para>
    <para>Statt SE&name-linux; zu deaktivieren oder es in den Permissive-Modus zu versetzen, können Sie den folgenden Befehl benutzen, um die CGIs im Enforcing/Targeted-Modus laufen zu lassen:</para>
    <screen>
chcon -R -t httpd_sys_content_t &url-icinga-base;/sbin/
chcon -R -t httpd_sys_content_t &url-icinga-base;/share/
</screen>
    <para>Besuchen Sie das &name-icinga;Community.org-Wiki unter <link xlink:href="&url-nagios-community;">&url-nagios-community;</link>, um Informationen darüber zu erhalten, wie die &name-icinga;-CGIs im Enforcing-Modus mit einer Targeted-Richtlinie ausgeführt werden.</para>
    <para>
      <emphasis role="bold">9) Anmelden am Web-Interface</emphasis>
    </para>
    <para>Sie sollten nun auf das &name-icinga;-Web-Interface zugreifen können. Sie werden nach dem Benutzernamen (<emphasis>nagiosadmin</emphasis>) und Passwort gefragt, das Sie vorhin angegeben haben.</para>
    <screen>
http://localhost/nagios/
</screen>
    <para>Klicken Sie auf den &quot;Service Detail&quot;-Verweis in der Navigationsleiste, um Details darüber zu erhalten, was auf Ihrer lokalen Maschine überwacht wird. Es wird ein paar Minuten dauern, bis &name-icinga; alle mit Ihrer Maschine verbundenen Services geprüft hat, weil die Prüfungen über eine gewisse Zeit verteilt werden.</para>
    <para>
      <emphasis role="bold">10) Andere Anpassungen</emphasis>
    </para>
    <para>Stellen Sie sicher, dass die Firewall-Einstellungen Ihrer Maschine einen Zugriff auf das Web-Interface ermöglichen, wenn Sie von anderen Rechnern darauf zugreifen wollen.</para>
    <para>Die Konfiguration von e-Mail-Benachrichtigungen ist nicht Gegenstand dieser Anleitung. &name-icinga; ist konfiguriert, um e-Mail-Benachrichtigungen zu versenden, aber möglicherweise ist auf Ihrem System noch kein Mail-Programm installiert bzw. konfiguriert. Schauen Sie in Ihre Systemdokumentation, suchen Sie im Web oder gucken Sie im <link xlink:href="&url-nagios-community;">&name-icinga;Community.org-Wiki</link> nach genauen Anweisungen, wie Ihr System konfiguriert werden muss, damit es e-Mail-Mitteilungen an externe Adressen versendet. Mehr Informationen zu Benachrichtigungen finden Sie <link linkend="notifications">hier</link>.</para>
    <para>
      <emphasis role="bold">11) Fertig</emphasis>
    </para>
    <para>Glückwunsch! Sie haben erfolgreich &name-icinga; installiert. Ihre Reise in die Überwachung hat gerade begonnen. Sie werden ohne Zweifel mehr als nur Ihre lokale Maschine überwachen wollen, so dass Sie u.a. die folgenden Abschnitte lesen sollten...</para>
    <itemizedlist>
      <listitem>
        <para>
          <link linkend="monitoring-windows">Windows-Rechner überwachen</link>
        </para>
      </listitem>
      <listitem>
        <para>
          <link linkend="monitoring-linux">&name-linux;/Unix-Rechner überwachen</link>
        </para>
      </listitem>
      <listitem>
        <para>
          <link linkend="monitoring-netware">Netware-Server überwachen</link>
        </para>
      </listitem>
      <listitem>
        <para>
          <link linkend="monitoring-routers">Router/Switches überwachen</link>
        </para>
      </listitem>
      <listitem>
        <para>
          <link linkend="monitoring-publicservices">Öffentlich zugängliche Dienste (HTTP, FTP, SSH, etc.) überwachen</link>
        </para>
      </listitem>
    </itemizedlist>
    <indexterm zone="quickstart-fedora"><primary>Schnellstart &name-fedora;</primary></indexterm>
    <indexterm zone="quickstart-fedora.xml"><primary>Schnellstart &name-fedora;</primary></indexterm>
</section>
