<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!ENTITY % all.entities SYSTEM "all-entities.ent">
%all.entities;
]>
<section version="5.0" xml:id="whatsnew" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:svg="http://www.w3.org/2000/svg" xmlns:m="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml" xmlns:db="http://docbook.org/ns/docbook">
  <title>What's New in &name-icinga; &ver-icinga;</title>

  <para><emphasis role="bold">1.5.0</emphasis></para>

  <itemizedlist>
  <listitem><para><emphasis role="bold">Enhancements</emphasis></para>

  <para><emphasis role="bold">&name-core;:</emphasis></para>
  <itemizedlist>
    <listitem>
      <para>do not update host/service status during scheduler initialization on startup (idoutils already know that) #1741</para>
    </listitem>
  </itemizedlist>

  <para><emphasis role="bold">Classic UI:</emphasis></para>
  <itemizedlist>
    <listitem><para>Added option to suppress colouring of hosts/services in maintenance #992</para></listitem>
    <listitem><para>Added option to show partial hostgroups #1013</para></listitem>
    <listitem><para>changing drop down menu in status.cgi to jquery-dd #1644</para></listitem>
    <listitem><para>default downtime duration is configurable in cgi.cfg #1642</para></listitem>
    <listitem><para>Added ability to combine host and service in one CGI parameter (Aaron Brady) #1633</para></listitem>
    <listitem><para>Changed tac.cgi to distinct between active, passive and disabled properly #1120</para></listitem>
    <listitem><para>Add log entries to json output of avail.cgi #1659</para></listitem>
    <listitem><para>add host urgency sort order in status.cgi (Jochen Bern) #1452</para></listitem>
    <listitem><para>add author to comment tooltips in status.cgi #1691</para></listitem>
    <listitem><para>reduce the header part of status.cgi #1507 (&amp;nostatusheader used in frameset menu, info table is smaller)</para></listitem>
    <listitem><para>authorization for * in cgi.cfg via contactgroups (Stephen Gran) #1752 (authorized_contactgroup_for_all_hosts,
      authorized_contactgroup_for_all_services, authorized_contactgroup_for_system_information,
      authorized_contactgroup_for_configuration_information, authorized_contactgroup_for_all_host_commands,
      authorized_contactgroup_for_all_service_commands, authorized_contactgroup_for_system_commands, authorized_contactgroup_for_read_only)
    </para></listitem>
    <listitem><para>add xml output to avail.cgi for direct source of jasper reports #1712</para></listitem>
    <listitem><para>add combined view of all unhandled hosts and services including the multiple command dropdowns for each (initial idea by Thruk) #1328</para></listitem>
    <listitem><para>add &quot;link to this page&quot; to all cgis #1783</para></listitem>
    <listitem><para>add export icons instead of &quot;export to...&quot; text on cgis supporting it (csv, json, xml, link) #1789</para></listitem>
    <listitem><para>add highlight_table_rows to status.cgi, can be disabled via cfg option #1777</para></listitem>
  </itemizedlist>

  <para><emphasis role="bold">&name-idoutils;:</emphasis></para>
  <itemizedlist>
    <listitem><para>add update-version-schema for updating the idoutils db schema versions automagically, independant of update-version #1616</para></listitem>
    <listitem><para>dump multiline mbufs as bulk inserts #1110 (configfile/runtime variables, host contacts/parents, service contacts,
      timeranges, host/service/contactgroup members; oracle uses bulk arrays binded on prepared insert statements)</para></listitem>
    <listitem><para>remove host and service checks from default data_processing_options as they are not used by icinga-web #1757</para></listitem>
    <listitem><para>&name-oracle;: add logging of bind variable value #1314</para></listitem>
    <listitem><para>&name-oracle;: change perfdata columns to clob #1749</para></listitem>
    <listitem><para>&name-oracle;: change logentry_data type to clob #1750</para></listitem>
  </itemizedlist>

  <para><emphasis role="bold">Install:</emphasis></para>
  <itemizedlist>
    <listitem><para>add --with-p1-file-dir allowing custom location (default is now $libdir instead of $bindir) #1569 (only when embedded
      perl is enabled; affects (new_)mini_epn and icinga.cfg</para></listitem>
    <listitem><para>add configure option to set log dir and cgi log dir and phpapi log dir #1715 (e.g. 
      <literal>--with-phpapi-log-dir=/var/log/icinga/api --with-log-dir=/var/log/icinga --with-cgi-log-dir=/var/log/icinga/gui</literal>;
      apache user permissions</para></listitem>
    <listitem><para>after daemon stop in init script, retry and then issue a kill -9 on the daemon #1747</para></listitem>
  </itemizedlist>

  <para><emphasis role="bold">Config:</emphasis></para>
  <itemizedlist>
    <listitem><para>add easy-to-use config examples and scripts for notifications #1697 (advanced notify-by-email; notify-by-jabber,
      notify-by-twitter examples</para></listitem>
    <listitem><para>add check_dummy command definitions as example to commands.cfg #1719</para></listitem>
    <listitem><para>tune icinga.cfg for performance, enable_environment_macros=0, enable_embedded_perl=0 by default #1635</para></listitem>
  </itemizedlist>

  <para><emphasis role="bold">Style:</emphasis></para>
  <itemizedlist>
    <listitem><para>add new indent tools #1617</para></listitem>
  </itemizedlist>
  </listitem>

  <listitem><para><emphasis role="bold">Fixes</emphasis></para>

  <para><emphasis role="bold">&name-core;</emphasis></para>
  <itemizedlist>
    <listitem><para>remove duplicated unlinks for check result files with multiple results (Ton Voon) #1615</para></listitem>
    <listitem><para>fix retain status file over an init script reload #1579</para></listitem>
    <listitem><para>fix freshness_threshold problem in host checks by using check_interval in HARD or OK state, else retry_interval (like service checks) (Andreas Ericsson) #1331</para></listitem>
    <listitem><para>make command_check_interval=-1 equal to 5s instead of 60s, targetting as often as possible (Andreas Ericsson) #1651</para></listitem>
    <listitem><para>fix problem where acknowledgements were getting reset when a hard state change occurred (Ton Voon) #1618</para></listitem>
    <listitem><para>avoid using global macros when sending notifications (Andreas Ericsson) #1653</para></listitem>
    <listitem><para>avoid sending notifications to the wrong contact (Andreas Ericsson) #1654</para></listitem>
    <listitem><para>try to avoid a single check being reaped multiple times (Andreas Ericsson) #1652</para></listitem>
    <listitem><para>Fix typo in configure.in preventing compilation on FreeBSD (thanks sag47) #1732</para></listitem>
  </itemizedlist>

  <para><emphasis role="bold">Classic UI</emphasis></para>
  <itemizedlist>
    <listitem><para>fix cross site scripting vulnerability in config.cgi on config expander arguments #1605</para></listitem>
    <listitem><para>better handling of writing to cgi.log in cmd.cgi #1161</para></listitem>
    <listitem><para>fixing tac.cgi header problems with counting and adding pending and descriptions #1505 #1506 #1508</para></listitem>
    <listitem><para>corrected behaviour of pending states in tac header #1508</para></listitem>
    <listitem><para>fix counting for services in tac header is wrong #1508</para></listitem>
    <listitem><para>remove sidebar.html inclusion in index.html causing troubles on reload #1632</para></listitem>
    <listitem><para>fixed: User can execute host/servicegroup commands even if not authorized for (Sven Nierlein) #1679</para></listitem>
    <listitem><para>fixed: plugin_output_short didn't get checked properly and caused segfault in status.cgi #1673</para></listitem>
    <listitem><para>fixed: submitting non existent host/service on avail.cgi causes segfault #1700</para></listitem>
    <listitem><para>fixed: Alert History State filter for HARD/SOFT state not working (Lennart Betz) #1722</para></listitem>
    <listitem><para>fixed: jquery 1.5.2 triggers memory leak in IE #1740</para></listitem>
    <listitem><para>fixed: ssi files don't get included if icinga path contains uppercase letters #1716</para></listitem>
  </itemizedlist>

  <para><emphasis role="bold">Install</emphasis></para>
  <itemizedlist>
    <listitem><para>do not update start_time of already started downtimes #1658</para></listitem>
    <listitem><para>fix started downtime update for table scheduleddowntime in oracle #1658</para></listitem>
    <listitem><para>remove leftover socket file in init-script startup, e.g. from a system crash #1745</para></listitem>
    <listitem><para>simplify ido2db_get_object_id oracle function #1655</para></listitem>
    <listitem><para>fix oracle long_output column in eventhandlers missed #1748</para></listitem>
    <listitem><para>fix oracle ocilib 3.9.2+ fixes causing wrong 4byte->8Byte casts #1751</para></listitem>
    <listitem><para>fix ORA-00600 while executing merge #1362</para></listitem>
  </itemizedlist>

  <para><emphasis role="bold">Classic UI</emphasis></para>
  <itemizedlist>
    <listitem><para>fix event handlers cmd file location in contrib #1501</para></listitem>
    <listitem><para>icinga.spec should not provide nagios version #1562</para></listitem>
    <listitem><para>don't include git meta data in upstream tarballs #1562</para></listitem>
    <listitem><para>fix make install-idoutils overwrites sample - adding idoutils.cfg-sample instead #1625</para></listitem>
    <listitem><para>fix icinga.cmd and log dir replacement in icinga-api aubmodule #1573 #1715</para></listitem>
    <listitem><para>fix DEBUG_LOG_PATH in p1.pl, will now be using configurable log-dir #1715</para></listitem>
    <listitem><para>do not overwrite config in make fullinstall #1754</para></listitem>
    <listitem><para>fix configure should tell if ocilib or libdbi if idoutils enabled in summary #1780</para></listitem>
  </itemizedlist>

  <para><emphasis role="bold">Config</emphasis></para>
  <itemizedlist>
    <listitem><para>deprecate log_external_commands_user #1619</para></listitem>
  </itemizedlist>
  </listitem>
  </itemizedlist>

  <para><link xlink:href="https://wiki.icinga.org/display/Dev/Releases">More at Icinga Wiki</link></para>

  <para>Should you find any issues, please report them to one of the following links:</para>

  <para><link xlink:href="https://dev.icinga.org/projects/show/icinga-core">Report Issue &name-core;</link></para>

  <para><link xlink:href="https://dev.icinga.org/projects/show/icinga-web">Report Issue &name-web;</link></para>

  <para><link xlink:href="https://dev.icinga.org/projects/show/icinga-api">Report Issue &name-api;</link></para>
  <para><link xlink:href="https://dev.icinga.org/projects/show/icinga-reporting">Report Issue &name-rep;</link></para>

  <para><link xlink:href="https://dev.icinga.org/projects/show/icinga-docs">Report Issue &name-docs;</link></para>

  <indexterm zone="whatsnew">
    <primary>What's new in &name-icinga;</primary>
  </indexterm>

</section>
